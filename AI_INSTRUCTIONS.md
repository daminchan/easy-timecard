# EazyTimeCard - AI 実装指示書

## プロジェクト概要

企業向け簡易タイムカードアプリケーションの実装指示書です。
このドキュメントは、AI アシスタントが実装を支援する際の指針となります。

## 実装ルール

### 1. コードスタイルと品質

- **厳密な型付け**

  - `any`や型キャストの使用を禁止
  - タイプガードを活用した型安全性の確保
  - プリミティブ型のエイリアス化を推奨

- **非破壊的操作**

  - `map`、`filter`、スプレッド演算子を優先使用
  - `push`や`splice`などの破壊的操作を禁止

- **変数定義**

  - すべての変数は`const`で定義
  - `let`の使用を禁止
  - 再代入が必要な場合は、新しいスコープを作成

- **コメント**
  - 複雑なロジックには説明コメントを付与
  - JSDoc 形式でのドキュメント化
  - マジックナンバーの禁止（定数として定義）

### 2. ディレクトリ構造とファイル命名

- **コンポーネントの配置**

  - 共通 UI コンポーネント → `components/ui/`
  - 共通機能コンポーネント → `components/common/`
  - ページ固有のコンポーネント → `app/(dashboard)/{page}/_components/`
  - 機能モジュール → `features/{domain}/`
  - フック → `hooks/`
  - ユーティリティ → `lib/utils/`

- **ファイル命名**

  - ページコンポーネント: `page.tsx`
  - レイアウトコンポーネント: `layout.tsx`
  - コンポーネント: `{ComponentName}.tsx`
  - 型定義: `types.ts`
  - ユーティリティ: `utils.ts`
  - フック: `use{HookName}.ts`
  - API 関数: `{action}{Resource}.ts`

- **ディレクトリグループ**
  - `app/`: ページとルーティング
    - `(auth)/`: 認証関連のルート
    - `(dashboard)/`: ダッシュボード関連のルート
  - `components/`: 共通コンポーネント
  - `features/`: 機能モジュール
  - `hooks/`: カスタムフック
  - `lib/`: ユーティリティと外部サービス連携

### 3. コンポーネント設計

- **責任の分割**

  - 単一責任の原則を遵守
  - プレゼンテーショナルとコンテナの分離

- **Props 型定義**

  - 各プロパティに説明コメントを付与
  - 必須プロパティの明示
  - 型の再利用を推進

- **状態管理**
  - Jotai を使用したアトミックな状態管理
  - グローバル状態の最小化

### 4. API 実装

- **エンドポイント設計**

  - RESTful 原則に従う
  - エラーハンドリングの統一
  - 適切な HTTP メソッドの使用

- **データ検証**
  - 入力値の厳密なバリデーション
  - 型安全性の確保
  - エラーメッセージの統一

### 5. データベース設計

- **Prisma スキーマ**
  - 適切なリレーション設定
  - インデックスの最適化
  - 必要なフィールドの明確化

### 6. 認証・認可

- **Clerk 認証**
  - 企業アカウントの管理
  - セッション管理
  - 権限制御

### 7. UI/UX 設計

- **shadcn/ui コンポーネント**

  - 一貫したデザインシステムの使用
  - アクセシビリティの確保
  - レスポンシブデザインの実装

- **フォーム実装**
  - バリデーションの統一
  - エラー表示の一貫性
  - UX を考慮した実装

### 8. エラーハンドリング

- **例外処理**
  - 適切なエラーバウンダリの実装
  - ユーザーフレンドリーなエラーメッセージ
  - ログ記録の実装

### 9. パフォーマンス最適化

- **レンダリング最適化**
  - 不要な再レンダリングの防止
  - メモ化の適切な使用
  - 遅延読み込みの実装

### 10. テスト実装

- **テストカバレッジ**
  - ユニットテストの実装
  - 統合テストの実装
  - E2E テストの実装

## 実装順序

1. プロジェクトのセットアップ
2. 認証機能の実装
3. データベーススキーマの実装
4. 基本的な UI/UX の実装
5. 打刻機能の実装
6. 管理機能の実装
7. 給与計算機能の実装
8. テストの実装
9. パフォーマンス最適化
10. セキュリティ強化

## 注意事項

- コードの品質を最優先
- セキュリティを常に意識
- パフォーマンスを考慮
- 保守性の高いコード作成
- ドキュメントの充実
